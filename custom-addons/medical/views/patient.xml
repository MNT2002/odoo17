<odoo>
	<record id="medical_patient_form_view" model="ir.ui.view">
		<field name="name">medical.patient.form</field>
		<field name="model">medical.patient</field>
		<field name="arch" type="xml">
			<form string="Bệnh nhân">
				<header>
					<button name="%(medical.change_state_patient_action)d" string="Đã khám" type="action" class="oe_highlight" invisible="state == 'examined'"/>
					<button name="btn_waiting" string="Đang chờ" type="object" confirm='Bạn có muốn thay đổi trạng thái của bệnh nhân thành "Đang chờ"?' class="oe_highlight" invisible="state == 'waiting'"/>
					<field name="state" widget="statusbar" />
				</header> 
				<sheet>
					<div class="oe_button_box" name="button_box">
						
					</div>
					<field name="image" nolabel="1" widget="image" class="oe_avatar"/>
					<div class="oe_title">
						<label for="name"/>
						<h1>
							<field name="name" required="1"/>
						</h1>
						<field name="identification_code"/>
					</div>
					<group>
						<group>
							<field name="age" readonly="1"/>
							<field name="marital_status" />
							<field name="sex" widget="radio"/>
						</group>
						<group>
							<field name="dob" required="1"/>
							<field name="yob" readonly="1"/>
							<field name="id_card"/>
							<field name="blood_type" />
							<field name="rh" />
							<field name="doctor" />
						</group>
					</group>
					<separator string="Tài khoản người dùng" colspan="4" />
					<notebook >
						<page string="Cá nhân">
							<group>
								<group>
									<label for="street" string="Địa chỉ"/>
									<div>
										<field name="street" placeholder="Street..." on_change="1" field_id="street_0"/>
										<field name="street2" on_change="1" field_id="street2_0"/>
										<field name="country_id" placeholder="Quốc gia" class="oe_no_button" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" on_change="1" can_create="True" can_write="True" field_id="country_id_0"/>
										<div class="address_format">
											<field name="state_id" class="oe_no_button" placeholder="Tỉnh/Thành phố " required='country_id!= False' style="width: 37%" options="{&quot;no_open&quot;: True}" on_change="onchange_state(state_id)" can_create="True" can_write="True" field_id="state_id_0"/>
											<field name="city" placeholder="Thành phố" style="width: 40%" on_change="1" field_id="city_0"/>
											<field name="zip" placeholder="Mã bưu điện" style="width: 20%" on_change="1" field_id="zip_0"/>
										</div>
										<div class="address_format">
											<field name="ward" placeholder="Phường/Xã" style="width: 49%" can_create="True" can_write="True" field_id="wards_id_0"/>
											<field name="district" class="oe_no_button" placeholder="Quận/Huyện" style="width: 49%" field_id="district_id_0"/>
										</div>
									</div>
									<field name="website_link" widget="url" placeholder="e.g. www.odoo.com" on_change="1" field_id="website_0"/>
								</group>
								<group>
									<field name="function" string="Chức vụ" placeholder="e.g. developer" on_change="1" field_id="function_0"/>
									<field name="phone" placeholder="e.g. +84 012345678" on_change="1" field_id="phone_0"/>
									<field name="email" widget="email" on_change="1" field_id="email_0"/>
								</group>
							</group>
						</page>
						<!-- <page string="Gia đình &amp; bảo hiểm">

						</page> -->
						<page string="Thuốc">
							<field name="prescription_ids" nolabel="1" readonly="1">
								<tree string="Đơn thuốc">
									<field name="prescription_date"/>
									<field name="name"/>
									<field name="doctor_id"/>
									<field name="state"/>
								</tree>
							</field>
						</page>
						<!-- <page string="Đánh giá">

						</page> -->
						<page string="Phiếu khám bệnh">
							<field name="walkins_ids" nolabel="1" readonly="1">
								<tree string="Phiếu khám bệnh">
									<field name="date"/>
									<field name="name"/>
									<field name="diagnosis"/>
									<field name="date_re_exam"/>
								</tree>
							</field>
						</page>
						<page string="Chẩn đoán hình ảnh">
							<field name="diagnostic_imaging_ids" nolabel="1" readonly="1">
								<tree string="Chẩn đoán hình ảnh">
									<field name="date_of_the_anlysis"/>
									<field name="walkins_id"/>
									<field name="analysis"/>
									<field name="conclusion"/>
								</tree>
							</field>
						</page>
						<page string="Lifestyle">
							<group>
								<group string="Tập thể dục">
									<field name="exercise"/>
									<field name="exercise_minutes_day" default="0" help="Số phút bệnh nhân tập thể dục mỗi ngày"/>
								</group>
								<group string="Ngủ">
									<field name="sleep_during_daytime" help="Chọn nếu giờ ngủ là ban ngày chứ không phải ban đêm"/>
									<field name="sleep_hours" default="0" help="Số giờ ngủ trung bình mỗi ngày"/>
								</group>
							</group>
							<group string="Thông tin về chế độ ăn uống">
								<group>
									<field name="number_of_meals" default="0"/>
									<field name="eats_alone"/>
									<field name="coffee"/>
									<field name="coffee_cups" default="0" help="Số ly cà phê bệnh nhân uống một ngày"/>
								</group>
								<group >
									<field name="soft_drinks" help="Chọn nếu bệnh nhân có uống nước có đường"/>
									<field name="salt" help="Chọn nếu bệnh nhân có tiêu thụ muối trong chế độ ăn"/>
									<field name="diet" />
									<field name="diet_info" help="Mô tả ngắn gọn về chế độ ăn uống"/>
								</group>
							</group>
							<group string="Thông tin về phong cách sống">
							</group>
							<notebook>
								<page string="Nghiện" name="nghien">
									<group string="Hút thuốc">
										<group>
											<field name="smoking"/>
											<field name="age_start_smoking" default="0"/>
											<field name="smoking_number" default="0"/>
										</group>
										<group>
											<field name="second_hand_smoker" />
											<field name="ex_smoker" />
											<field name="age_quit_smoking" default="0"/>
										</group>
									</group>
									<group string="Rượu/bia">
										<group>
											<field name="alcohol"/>
											<field name="age_start_drinking" default="0"/>
											<field name="alcohol_beer_number" default="0"/>
											<field name="alcohol_liquor_number" default="0"/>
										</group>
										<group>
											<field name="ex_alcoholic"/>
											<field name="last_month_drink_beer" default="0"/>
											<field name="age_quit_drinking" default="0"/>
										</group>
									</group>
									<group string="Thuốc kích thích">
										<group>
											<field name="drug_usage"/>
											<field name="age_start_drugs" default="0"/>
											<field name="drug_iv" help="Tên loại thuốc kích thích mà bệnh nhân hay sử dụng (nếu có)"/>
										</group>
										<group>
											<field name="ex_drug_addict" />
											<field name="age_quit_drugs" default="0"/>
										</group>
									</group>
								</page>
								<page string="Tham gia giao thông" name="tham_gia_giao_thong">
									<group>
										<group>
											<field name="motorcycle_rider" help="Bệnh nhân có sử dụng xe máy để di chuyển"/>
											<field name="helmet"/>
											<field name="traffic_laws"/>
										</group>
										<group>
											<field name="car_revision" />
											<field name="car_rider" help="Bệnh nhân có sử dụng ô tô để di chuyển"/>
											<field name="car_seat_belt"/>
										</group>
									</group>
								</page>
							</notebook>
						</page>
						<!-- <page string="Phiếu xét nghiệm">

						</page> -->
						<!-- <page string="Nhật kí cuộc gọi">

						</page>
						<page string="Tiền sử bệnh">

						</page> -->
					</notebook>
				</sheet>
			</form>
		</field>
	</record>

	<record id="patient_search_view" model="ir.ui.view">
		<field name="name">Tìm kiếm bệnh nhân</field>
		<field name="model">medical.patient</field>
		<field name="arch" type="xml">
			<search string="">
				<field name="name"/>
				<field name="age"/>
				<field name="sex"/>
				<field name="blood_type"/>
				<separator/>
				<group expand="1" string="Nhóm theo">
					<filter string="Họ và tên" name="group_by_name" context="{'group_by': 'name'}"/>
					<filter string="Giới tính" name="group_by_gender" context="{'group_by': 'sex'}"/>
					<filter string="Bác sĩ" name="group_by_doctor" context="{'group_by': 'doctor'}"/>
					<filter string="Ngày tạo" name="group_by_create_date" context="{'group_by': 'create_date:day'}"/>
				</group>
			</search>
		</field>
	</record>

	<record id="medical_patient_tree_view" model="ir.ui.view">
		<field name="name">medical.patient.tree</field>
		<field name="model">medical.patient</field>
		<field name="arch" type="xml">
			<tree string="Thông tin bệnh nhân">
				<field name="name" />
				<field name="identification_code" />
				<field name="sex" />
				<field name="dob"/>
				<field name="age"/>
				<field name="doctor"/>
			</tree>
		</field>
	</record>
	<record id="medical_patient_kanban_view" model="ir.ui.view">
		<field name="name">medical.patient.kanban</field>
		<field name="model">medical.patient</field>
		<field name="arch" type="xml">
			<kanban>
				<field name="name" />
				<field name="image" />
				<field name="sex" />
				<field name="age" />
				<field name="blood_type" />
				<templates>
					<t t-name="kanban-box">
						<div class="oe_kanban_global_click oe_kanban_card">
							<div class="oeh_medical_vignette oe_semantic_html_override">
								<div class="o_kanban_image" style="margin-top:15px;">
									<a type="open">
										<img widget="image" heigh="100" width="100" t-att-alt="record.id.value" t-att-src="kanban_image('medical.patient', 'image', record.id.raw_value)"/>
									</a>
								</div>
								<div class="oe_kanban_details" style="text-align: right">
									<h4>
										<a type="open">
											<field name="name"/>
										</a>
									</h4>
									<ul>
										<li t-if="record.identification_code.raw_value">
											<field name="identification_code"/>
										</li>
										<li>Giới tính: <field name="sex"/>
										</li>
										<li>Tuổi: <field name="age"/>
										</li>
										<li>Nhóm máu: <field name="blood_type"/>
										</li>
									</ul>
								</div>
							</div>
						</div>
					</t>
				</templates>
			</kanban>
		</field>
	</record>

	<record id="medical_patient_action" model="ir.actions.act_window">
		<field name="name">Bệnh nhân</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">medical.patient</field>
		<field name="view_mode">kanban,tree,form</field>
		<field name="context">{'search_default_group_by_create_date': 1, 'group_by_no_leaf': 1, 'search_default_order_by_create_date': 1}</field>
	</record>
	<record id="medical_patient_action_domain_blood_type" model="ir.actions.act_window">
		<field name="name">Bệnh nhân</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">medical.patient</field>
		<field name="view_mode">tree,form,kanban</field>
		<field name="domain">[('blood_type', '!=', '' 3) </field>
	</record>

</odoo>