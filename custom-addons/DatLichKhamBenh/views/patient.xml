<odoo>
	<record id="medical_patient_form_view" model="ir.ui.view">
		<field name="name">medical.patient.form</field>
		<field name="model">medical.benh_nhan</field>
		<field name="arch" type="xml">
			<form string="Bệnh nhân">
				<header>
					<button name="%(DatLichKhamBenh.change_state_benh_nhan_action)d" string="Đã khám" type="action" class="oe_highlight" invisible="state == 'DaKham'"/>
					<button name="btn_dang_cho" string="Đang chờ" type="object" confirm='Bạn có muốn thay đổi trạng thái của bệnh nhân thành "Đang chờ"?' class="oe_highlight" invisible="state == 'DangCho'"/>
					<field name="state" widget="statusbar" />
				</header> 
				<sheet>
					<div class="oe_button_box" name="button_box">
						
					</div>
					<field name="anh_dai_dien" nolabel="1" widget="image" class="oe_avatar"/>
					<div class="oe_title">
						<label for="name"/>
						<h1>
							<field name="name" required="1"/>
						</h1>
						<field name="identification_code"/>
					</div>
					<group>
						<group>
							<field name="tuoi_benh_nhan" readonly="1"/>
							<field name="tinh_trang_hon_nhan" />
							<field name="gioi_tinh" widget="radio"/>
						</group>
						<group>
							<field name="ngay_sinh" required="1"/>
							<field name="nam_sinh" readonly="1"/>
							<field name="cccd"/>
							<field name="nhom_mau" />
							<field name="rh" />
							<field name="bac_si_gia_dinh" />
						</group>
					</group>
					<separator string="Tài khoản người dùng" colspan="4" />
					<notebook >
						<page string="Cá nhân">
							<group>
								<group>
									<label for="dia_chi" string="Địa chỉ"/>
									<div>
										<field name="dia_chi" placeholder="Street..." on_change="1" field_id="street_0"/>
										<field name="dia_chi_2" on_change="1" field_id="street2_0"/>
										<field name="country_id_new" placeholder="Quốc gia" class="oe_no_button" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" on_change="1" can_create="True" can_write="True" field_id="country_id_0"/>
										<div class="address_format">
											<field name="state_id_new" class="oe_no_button" placeholder="Tỉnh/Thành phố " required='country_id_new != False' style="width: 37%" options="{&quot;no_open&quot;: True}" on_change="onchange_state(state_id)" can_create="True" can_write="True" field_id="state_id_0"/>
											<field name="thanh_pho" placeholder="Thành phố" style="width: 40%" on_change="1" field_id="city_0"/>
											<field name="zip" placeholder="Mã bưu điện" style="width: 20%" on_change="1" field_id="zip_0"/>
										</div>
										<div class="address_format">
											<field name="phuong_xa" placeholder="Phường/Xã" style="width: 49%" can_create="True" can_write="True" field_id="wards_id_0"/>
											<field name="quan_huyen" class="oe_no_button" placeholder="Quận/Huyện" style="width: 49%" field_id="district_id_0"/>
										</div>
									</div>
									<field name="website_link" widget="url" placeholder="e.g. www.odoo.com" on_change="1" field_id="website_0"/>
								</group>
								<group>
									<field name="chuc_vu" string="Chức vụ" placeholder="e.g. developer" on_change="1" field_id="function_0"/>
									<field name="so_dien_thoai" placeholder="e.g. +84 012345678" on_change="1" field_id="phone_0"/>
									<field name="email" widget="email" on_change="1" field_id="email_0"/>
								</group>
							</group>
						</page>
						<!-- <page string="Gia đình &amp; bảo hiểm">

						</page> -->
						<page string="Thuốc">
							<field name="thuoc_ids" nolabel="1" readonly="1">
								<tree string="Đơn thuốc">
									<field name="ngay_ke_don"/>
									<field name="name"/>
									<field name="bac_si_id"/>
									<field name="state"/>
								</tree>
							</field>
						</page>
						<!-- <page string="Đánh giá">

						</page> -->
						<page string="Phiếu khám bệnh">
							<field name="phieu_kham_benh_ids" nolabel="1" readonly="1">
								<tree string="Phiếu khám bệnh">
									<field name="ngay"/>
									<field name="name"/>
									<field name="chan_doan"/>
									<field name="ngay_tai_kham"/>
								</tree>
							</field>
						</page>
						<page string="Chẩn đoán hình ảnh">
							<field name="chan_doan_hinh_anh_ids" nolabel="1" readonly="1">
								<tree string="Phiếu khám bệnh">
									<field name="ngay_phan_tich"/>
									<field name="phieu_kham_benh_id"/>
									<field name="phan_tich"/>
									<field name="ket_luan"/>
								</tree>
							</field>
						</page>
						<page string="Lifestyle">
							<group>
								<group string="Tập thể dục">
									<field name="tap_the_duc"/>
									<field name="so_phut_mot_ngay" default="0" help="Số phút bệnh nhân tập thể dục mỗi ngày"/>
								</group>
								<group string="Ngủ">
									<field name="ngu_vao_ban_ngay" help="Chọn nếu giờ ngủ là ban ngày chứ không phải ban đêm"/>
									<field name="gio_ngu" default="0" help="Số giờ ngủ trung bình mỗi ngày"/>
								</group>
							</group>
							<group string="Thông tin về chế độ ăn uống">
								<group>
									<field name="bua_an_mot_ngay" default="0"/>
									<field name="an_mot_minh"/>
									<field name="ca_phe"/>
									<field name="so_ly_mot_ngay" default="0" help="Số ly cà phê bệnh nhân uống một ngày"/>
								</group>
								<group >
									<field name="nuoc_giai_khat" help="Chọn nếu bệnh nhân có uống nước có đường"/>
									<field name="muoi" help="Chọn nếu bệnh nhân có tiêu thụ muối trong chế độ ăn"/>
									<field name="trong_che_do_an_kieng" />
									<field name="thong_tin_che_do_an" help="Mô tả ngắn gọn về chế độ ăn uống"/>
								</group>
							</group>
							<group string="Thông tin về phong cách sống">
							</group>
							<notebook>
								<page string="Nghiện" name="nghien">
									<group string="Hút thuốc">
										<group>
											<field name="hut_thuoc"/>
											<field name="tuoi_bat_dau_hut_thuoc" default="0"/>
											<field name="dieu_thuoc_mot_ngay" default="0"/>
										</group>
										<group>
											<field name="nguoi_hut_thuoc_thu_dong" />
											<field name="tung_hut_thuoc" />
											<field name="tuoi_bo_thuoc" default="0"/>
										</group>
									</group>
									<group string="Rượu/bia">
										<group>
											<field name="uong_ruou_bia"/>
											<field name="tuoi_bat_dau_uong" default="0"/>
											<field name="bia_tren_ngay" default="0"/>
											<field name="ruou_tren_ngay" default="0"/>
										</group>
										<group>
											<field name="tung_uong_ruou_bia"/>
											<field name="thang_gan_nhat_uong_ruou" default="0"/>
											<field name="tuoi_bo_ruou" default="0"/>
										</group>
									</group>
									<group string="Thuốc kích thích">
										<group>
											<field name="su_dung_thuoc_kich_thich"/>
											<field name="tuoi_bat_dau_dung_thuoc_kich_thich" default="0"/>
											<field name="loai_thuoc_hay_dung" help="Tên loại thuốc kích thích mà bệnh nhân hay sử dụng (nếu có)"/>
										</group>
										<group>
											<field name="tung_nghien_thuoc" />
											<field name="tuoi_bo_thuoc_kich_thich" default="0"/>
										</group>
									</group>
								</page>
								<page string="Tham gia giao thông" name="tham_gia_giao_thong">
									<group>
										<group>
											<field name="chay_xe_may" help="Bệnh nhân có sử dụng xe máy để di chuyển"/>
											<field name="doi_non_bao_hiem"/>
											<field name="tuan_thu_luat_giao_thong"/>
										</group>
										<group>
											<field name="sua_xe" />
											<field name="chay_xe_oto" help="Bệnh nhân có sử dụng ô tô để di chuyển"/>
											<field name="that_day_an_toan"/>
										</group>
									</group>
								</page>
							</notebook>
						</page>
						<!-- <page string="Phiếu xét nghiệm">

						</page> -->
						<!-- <page string="Nhật kí cuộc gọi">

						</page>
						<page string="Tiền sử bệnh">

						</page> -->
					</notebook>
				</sheet>
			</form>
		</field>
	</record>

	<record id="patient_search_view" model="ir.ui.view">
		<field name="name">Tìm kiếm bệnh nhân</field>
		<field name="model">medical.benh_nhan</field>
		<field name="arch" type="xml">
			<search string="">
				<field name="name"/>
				<field name="tuoi_benh_nhan"/>
				<field name="gioi_tinh"/>
				<field name="nhom_mau"/>
				<separator/>
				<group expand="1" string="Nhóm theo">
					<filter string="Họ và tên" name="group_by_name" context="{'group_by': 'name'}"/>
					<filter string="Giới tính" name="group_by_gender" context="{'group_by': 'gioi_tinh'}"/>
					<filter string="Bác sĩ" name="group_by_doctor" context="{'group_by': 'bac_si_gia_dinh'}"/>
					<filter string="Ngày tạo" name="group_by_create_date" context="{'group_by': 'create_date'}"/>
				</group>
			</search>
		</field>
	</record>

	<record id="medical_patient_tree_view" model="ir.ui.view">
		<field name="name">medical.patient.tree</field>
		<field name="model">medical.benh_nhan</field>
		<field name="arch" type="xml">
			<tree string="Thông tin bệnh nhân">
				<field name="name" />
				<field name="identification_code" />
				<field name="gioi_tinh" />
				<field name="ngay_sinh"/>
				<field name="tuoi_benh_nhan"/>
				<field name="bac_si_gia_dinh"/>
			</tree>
		</field>
	</record>
	<record id="medical_patient_kanban_view" model="ir.ui.view">
		<field name="name">medical.patient.kanban</field>
		<field name="model">medical.benh_nhan</field>
		<field name="arch" type="xml">
			<kanban>
				<field name="name" />
				<field name="anh_dai_dien" />
				<field name="gioi_tinh" />
				<field name="tuoi_benh_nhan" />
				<field name="nhom_mau" />
				<templates>
					<t t-name="kanban-box">
						<div class="oe_kanban_global_click oe_kanban_card">
							<div class="oeh_medical_vignette oe_semantic_html_override">
								<div class="o_kanban_image" style="margin-top:15px;">
									<a type="open">
										<img widget="image" heigh="100" width="100" t-att-alt="record.id.value" t-att-src="kanban_image('medical.benh_nhan', 'anh_dai_dien', record.id.raw_value)"/>
									</a>
								</div>
								<div class="oe_kanban_details" style="text-align: right">
									<h4>
										<a type="open">
											<field name="name"/>
										</a>
									</h4>
									<ul>
										<li t-if="record.identification_code.raw_value">
											<field name="identification_code"/>
										</li>
										<li>Giới tính: <field name="gioi_tinh"/>
										</li>
										<li>Tuổi: <field name="tuoi_benh_nhan"/>
										</li>
										<li>Nhóm máu: <field name="nhom_mau"/>
										</li>
									</ul>
								</div>
							</div>
						</div>
					</t>
				</templates>
			</kanban>
		</field>
	</record>

	<record id="medical_patient_action" model="ir.actions.act_window">
		<field name="name">Bệnh nhân</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">medical.benh_nhan</field>
		<field name="view_mode">kanban,tree,form</field>
		<field name="context">{'search_default_group_by_create_date': 1}</field>
	</record>
	<record id="medical_patient_action_domain_nhom_mau" model="ir.actions.act_window">
		<field name="name">Bệnh nhân</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">medical.benh_nhan</field>
		<field name="view_mode">tree,form,kanban</field>
		<field name="domain">[('nhom_mau', '!=', '' 3) </field>
	</record>

</odoo>